/***  VERSION // 0.3*  AUTHOR // siegfried.ehret@gmail.com**  LICENSE //**  DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE*                   Version 2, December 2004* * Copyright (C) 2004 Sam Hocevar <sam@hocevar.net>** Everyone is permitted to copy and distribute verbatim or modified* copies of this license document, and changing it is allowed as long* as the name is changed.* *           DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE*   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION* * 0. You just DO WHAT THE FUCK YOU WANT TO.*/(function($,undefined){	var divtag='<div/>',atag='<a/>',inputtag='<input/>',imgtag='<img/>',ddgrId='ddgr',ddgbId='ddgb',ddgiId='ddgi',ddgiSel='#'+ddgiId;  $.fn.ddg=function(options) {    var options=$.extend({secure:'true',width:'200'},options),			url='http'+(options.secure?'s':'')+'://api.duckduckgo.com/',			inputBox={'id':ddgiId},			inputBoxWidth=options.width-32-12-1,			inputBoxStyle={float:'left',background:'white',color:'#222',width:inputBoxWidth,height:'21px',padding:'4px 6px 5px 6px',margin:'0',outline:'none',border:'#9DCA5A solid 1px','border-right':'0','font-size':'18px'},			inputButton={id:ddgbId,type:'submit',value:''},			inputButtonStyle={float:'left',clear:'right',height:'32px',width:'32px',border:'0','border-bottom':'#9DCA5A solid 1px',background:'url("https://duckduckgo.com/sbutton.v101.lblue.png") no-repeat',cursor:'pointer'},			form=$('<form/>');		$(inputtag).attr(inputBox).css(inputBoxStyle).appendTo(form);		$(inputtag).attr(inputButton).css(inputButtonStyle).appendTo(form);		($(divtag).append(form)).appendTo($(this));		$(divtag).attr('id',ddgrId).appendTo($(this));    $('#'+ddgbId).click(function() {      $('#'+ddgrId).html('').css({'margin-top':'32px','font-family':'Arial',position:'absolute','background-color':'#fff',width:options.width});			if($('#'+ddgiId).val()) {				var remote=url+'?q='+encodeURIComponent($('#'+ddgiId).val())+'&format=json';				$.get(remote,function(j) {},'jsonp')          .success(function(data) { ddgCallback(data); } );			} else {				$('#'+ddgiId).val('Write here !');			}			return false;    });		this.css('width',options.width);    return this;  };	var ddgCallback = function(json) {      var htmlizer = {      heading:function(container) {        var div=$(divtag);        $(atag).css({'color':'#E44'}).attr('href',json.AbstractURL).text(json.Heading).appendTo(div);        if (json.AbstractURL && json.AbstractSource) {          ($('<span/>').html('More at ').append($(atag).attr('href',json.AbstractURL).text(json.AbstractSource))).appendTo(div);        }        div.appendTo(ddgBox);      },      relatedTopic:function(container, item) {        if (item.Result) $(divtag).css(line).css(lineStyle).html($(item.Result)).appendTo(container).hover(fnOver,fnOut);        else if (item.Topics) {          $(divtag).css(line).css({'border-bottom':'1px solid red'}).html(item.Name).appendTo(container);          $.each(item.Topics,function(i,sub){            var div=$(divtag).css(line).css(lineStyle).css(subStyle).hover(fnOver,fnOut);            if (sub.Icon && sub.Icon.URL) {              $(imgtag).attr({src:sub.Icon.URL,width:'16',height:'16'}).appendTo(div);            }            $(sub.Result).appendTo(div)            div.appendTo(container);          });        }      },      results:function(container, item) {        var div=$(divtag);        if (item.Icon) div.append($(divtag).addClass('ci').css({float:'left'}).append($(imgtag).attr({'src':item.Icon.URL,width:'16',height:'16'})));        if (item.Result) div.append($(divtag).attr('class','cli').css({'margin-left':'28px','word-wrap':'break-word'}).html(item.Result));        $(container).append(div);      }    };    		var line={'clear':'both','border':'1px solid #fff'},			lineOver={'background-color':'#E4F6B9',border:'1px solid #B8E478'},			lineOut= {'background-color':'#fff',border:'1px solid #fff'},			titleStyle={'border':'2px solid #E77','padding-left':'5px','padding-right':'3px'},			lineStyle={'padding-bottom':'4px','padding-top':'4px'},			subStyle={'padding-left':'10px'},			ddgBox=$(divtag).attr('id','ddgBox').css(titleStyle),			ddgHide='ddgHide',			ddgShow='ddgShow',			fnOver=function() { $(this).css(lineOver); },			fnOut=function() { $(this).css(lineOut); },			showHide = $(divtag).css({float:'right','margin-right':'5px'});		$(atag).attr({'class':'ddgHide'}).css({color:'#1168CC'}).text('-').click(function() {			$('#ddgBox').toggle();			if ($(this).hasClass(ddgHide)) $(this).removeClass(ddgHide).addClass(ddgShow).text('+');			else $(this).removeClass(ddgShow).addClass(ddgHide).text('-');		}).appendTo(showHide);		showHide.appendTo($('#'+ddgrId));		if (json.Answer) ddgBox.append(json.Answer);		if (json.Heading && json.AbstractURL) htmlizer.heading();		if (json.Abstract) ddgBox.append($('<p/>').html(json.Abstract));		if (json.RelatedTopics) {			$.each(json.RelatedTopics,function(i,item){				htmlizer.relatedTopic(ddgBox, item);			});		}		$('#'+ddgrId).append(ddgBox);		$.each(json.Results,function(i,item) {			htmlizer($('#'+ddgrId), item);		});	}})(jQuery);